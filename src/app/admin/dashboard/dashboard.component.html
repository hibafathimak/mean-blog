<main class="bg-gray-50 min-h-screen p-4 sm:p-6">
  <div class="max-w-7xl mx-auto">
    <app-nav></app-nav>
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-6 mb-8"
    >
      <div
        class="bg-white shadow rounded-xl md:py-12 py-6 px-6 border-l-4 border-teal-500 flex items-center justify-between hover:shadow-lg transition"
      >
        <div>
          <h2 class="text-lg font-semibold text-gray-700">Total Users</h2>
          <p class="text-3xl font-bold text-teal-600">{{ userCount }}</p>
        </div>
        <div
          class="p-3 bg-teal-50 rounded-full flex items-center justify-center w-12 h-12"
        >
          <i class="fa-solid fa-users text-teal-500 text-xl"></i>
        </div>
      </div>

      <div
        class="bg-white shadow rounded-xl md:py-12 py-6 px-6 border-l-4 border-teal-500 flex items-center justify-between hover:shadow-lg transition"
      >
        <div>
          <h2 class="text-lg font-semibold text-gray-700">Total Blogs</h2>
          <p class="text-3xl font-bold text-teal-600">{{ blogCount }}</p>
        </div>
        <div
          class="p-3 bg-teal-50 rounded-full flex items-center justify-center w-12 h-12"
        >
          <i class="fa-solid fa-file-alt text-teal-500 text-xl"></i>
        </div>
      </div>

      <div
        class="bg-white shadow rounded-xl md:py-12 py-6 px-6 border-l-4 border-teal-500 flex items-center justify-between hover:shadow-lg transition"
      >
        <div>
          <h2 class="text-lg font-semibold text-gray-700">Comments</h2>
          <p class="text-3xl font-bold text-teal-600">{{ commentCount }}</p>
        </div>
        <div
          class="p-3 bg-teal-50 rounded-full flex items-center justify-center w-12 h-12"
        >
          <i class="fa-solid fa-comment text-teal-500 text-xl"></i>
        </div>
      </div>

      <div
        class="bg-white shadow rounded-xl md:py-12 py-6 px-6 border-l-4 border-teal-500 flex items-center justify-between hover:shadow-lg transition"
      >
        <div>
          <h2 class="text-lg font-semibold text-gray-700">Reports</h2>
          <p class="text-3xl font-bold text-teal-600">{{ reportCount }}</p>
        </div>
        <div
          class="p-3 bg-teal-50 rounded-full flex items-center justify-center w-12 h-12"
        >
          <i class="fa-solid fa-circle-exclamation text-teal-600 text-xl"></i>
        </div>
      </div>
    </div>
    <div class="flex flex-col lg:flex-row gap-6 flex-wrap">
      <div class="bg-white rounded-xl shadow p-6 w-full lg:flex-1 min-w-0">
        <h2 class="text-2xl font-semibold text-teal-700 tracking-wide mb-4">
          Top Content
        </h2>
        <ul class="space-y-4">
          <li
            *ngFor="let blog of topPosts"
            class="flex items-center gap-4 border-b pb-3"
          >
            <img
              [src]="environment.serverUrl + '/uploads/' + blog.coverImage"
              alt="Post Image"
              class="w-20 h-14 object-cover rounded-md shadow-sm"
            />
            <div class="flex-1 min-w-0">
              <h3 class="text-base font-semibold text-gray-800 truncate">
                {{ blog.title }}
              </h3>
              <p class="text-sm text-gray-500 truncate">
                By {{ blog.author.username }} â€¢ {{ blog.category }}
              </p>
            </div>
            <p class="text-sm font-medium text-teal-600 whitespace-nowrap">
              {{ blog.likes.length }} likes
            </p>
          </li>
        </ul>
      </div>


      <div class="bg-white rounded-xl shadow p-5 w-full lg:flex-1 min-w-0">
        <h2 class="text-2xl font-semibold text-teal-700 mb-4">
          Recent Messages
        </h2>
        <div class="max-h-96 overflow-y-auto custom-scroll">
          <table class="w-full table-auto">
            <thead>
              <tr class="border-b">
                <th class="text-left p-4 text-gray-600 whitespace-nowrap">
                  Name
                </th>
                <th class="text-left p-4 text-gray-600">Message</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let message of latestMessages"
                class="border-b last:border-none"
              >
                <td class="p-4 text-sm text-gray-700 whitespace-nowrap">
                  {{ message.firstname }} {{ message.lastname }}
                </td>
                <td class="p-4 text-sm text-gray-700 break-words max-w-xs">
                  {{ message.description }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</main>
